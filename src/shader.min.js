export const GLSLX_SOURCE_MAIN =
  'precision highp float;uniform vec2 t;uniform vec3 J,K,w;uniform vec4 x[64];uniform float y,z,j,A,B,C,D;uniform sampler2D E;float F=1./j;mat3 G(float a,float b){float c=cos(a),d=cos(b),e=sin(a),f=sin(b);return mat3(d,f*e,-f*c,0.,c,e,f,d*-e,d*c);}vec3 u(vec3 a,out float v){a=a.xzy;float o=max(2.,floor(log2(2.236068*j*3.141593*(1.-a.z*a.z))*.72021));vec2 e=floor(pow(1.618034,o)/2.236068*vec2(1.,1.618034)+.5),b=fract((e+1.)*.618034)*6.283185-3.883222,c=-2.*e,d=vec2(atan(a.y,a.x),a.z-1.),p=floor(vec2(c.y*d.x-b.y*(d.y*j+1.),-c.x*d.x+b.x*(d.y*j+1.))/(b.x*c.y-c.x*b.y));float m=3.141593;vec3 q;for(float f=0.;f<4.;f+=1.){vec2 r=vec2(mod(f,2.),floor(f*.5));float h=dot(e,p+r);if(h>j)continue;float i=h/1.618034,k=(i-floor(i/3000.)*3000.)*6.283185,g=1.-2.*h*F,l=sqrt(1.-g*g);vec3 n=vec3(cos(k)*l,sin(k)*l,g);float s=length(a-n);if(s<m)m=s,q=n;}v=m;return q.xzy;}void main(){vec2 a=gl_FragCoord.xy/t*2.-1.;a.x*=t.x/t.y;float c=dot(a,a),b;vec3 d=vec3(0.,0.,1.),e=normalize(vec3(a,sqrt(.64-c)));if(c<=.64){vec3 f=e*G(z,y),g=u(f,b);float k=asin(g.y),h=acos(-g.x/cos(k));h=g.z<0.?-h:h;float s=texture2D(E,vec2(h*.5/3.141593,-(k/3.141593+.5))).x,v=smoothstep(8e-3,0.,b),l=dot(e,d),r=pow(l,C)*B,m=s*v*r,L=mix((1.-m)*pow(l,.4),m,D)+.1;gl_FragColor=vec4(J*L,1.);int M=int(A);float n=0.;for(int i=0;i<64;i++){if(i>=M)break;vec4 o=x[i];vec3 p=o.xyz,H=p-f;float q=o.w;if(dot(H,H)>q*q*4.)continue;vec3 N=u(p,b);b=length(N-f),b<q?n+=smoothstep(q*.5,0.,b):0.;}n=min(1.,n*r),gl_FragColor.xyz=mix(gl_FragColor.xyz,K,n),gl_FragColor.xyz+=pow(1.-dot(e,d),4.)*w;}float I=pow(dot(normalize(vec3(-a,sqrt(1.-c))),d),4.)*smoothstep(.1,1.,.2/(c-.64));gl_FragColor+=vec4(I*w,I);}'

export const GLSLX_NAME_DOTS = 'j'
export const GLSLX_NAME_U_RESOLUTION = 't'
export const GLSLX_NAME_GLOW_COLOR = 'w'
export const GLSLX_NAME_MARKERS = 'x'
export const GLSLX_NAME_PHI = 'y'
export const GLSLX_NAME_THETA = 'z'
export const GLSLX_NAME_MARKERS_NUM = 'A'
export const GLSLX_NAME_DOTS_BRIGHTNESS = 'B'
export const GLSLX_NAME_DIFFUSE = 'C'
export const GLSLX_NAME_DARK = 'D'
export const GLSLX_NAME_U_TEXTURE = 'E'
export const GLSLX_NAME_BASE_COLOR = 'J'
export const GLSLX_NAME_MARKER_COLOR = 'K'
