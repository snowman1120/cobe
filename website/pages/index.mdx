---
title: COBE
---

import createGlobe from "cobe";
import { useEffect, useRef } from "react";
import { useSpring } from 'react-spring';

export function Cobe() {
  const canvasRef = useRef();
  const pointerInteracting = useRef(null);
  const pointerInteractionMovement = useRef(0);
  const [{ r }, api] = useSpring(() => ({
    r: 0,
    config: {
      mass: 1,
      tension: 280,
      friction: 40,
      precision: 0.001,
    },
  }));
  useEffect(() => {
    let phi = 0;
    let width = 0;
    const onResize = () => canvasRef.current && (width = canvasRef.current.offsetWidth)
    window.addEventListener('resize', onResize)
    onResize()
    const globe = createGlobe(canvasRef.current, {
      devicePixelRatio: 2,
      width: width * 2,
      height: width * 2,
      phi: 0,
      theta: 0.3,
      dark: 1,
      diffuse: 3,
      mapSamples: 16000,
      mapBrightness: 1.2,
      baseColor: [1, 1, 1],
      markerColor: [251 / 255, 100 / 255, 21 / 255],
      glowColor: [1.2, 1.2, 1.2],
      markers: [],
      onRender: (state) => {
        // Called on every animation frame.
        // `state` will be an empty object, return updated params.
        state.phi = phi + r.get()
        phi += 0.005
        state.width = width * 2
        state.height = width * 2
      }
    })
    setTimeout(() => canvasRef.current.style.opacity = '1')
    return () => globe.destroy()
  }, [])
  return <div style={{
    width: '100%',
    maxWidth: 600,
    aspectRatio: 1,
    margin: 'auto',
    position: 'relative',
  }}>
    <h1 style={{
      width: '100%',
      fontSize: 'min(8vw,3em)',
      fontWeight: 700,
      top: 'calc(50% - .8em)',
      margin: 'auto',
      zIndex: 1, 
      letterSpacing: '.3em',
      textIndent: '.3em',
      textAlign: 'center',
      color: '#fff',
      pointerEvents: 'none',
      userSelect: 'none',
      position: 'absolute',
      mixBlendMode: 'difference'
    }}>COBE</h1>
    <canvas
      ref={canvasRef}
      onPointerDown={(e) => {
        pointerInteracting.current =
          e.clientX - pointerInteractionMovement.current;
        canvasRef.current.style.cursor = 'grabbing';
      }}
      onPointerUp={() => {
        pointerInteracting.current = null;
        canvasRef.current.style.cursor = 'grab';
      }}
      onPointerOut={() => {
        pointerInteracting.current = null;
        canvasRef.current.style.cursor = 'grab';
      }}
      onMouseMove={(e) => {
        if (pointerInteracting.current !== null) {
          const delta = e.clientX - pointerInteracting.current;
          pointerInteractionMovement.current = delta;
          api.start({
            r: delta / 200,
          });
        }
      }}
      onTouchMove={(e) => {
        if (pointerInteracting.current !== null && e.touches[0]) {
          const delta = e.touches[0].clientX - pointerInteracting.current;
          pointerInteractionMovement.current = delta;
          api.start({
            r: delta / 100,
          });
        }
      }}
      style={{
        width: '100%',
        height: '100%',
        cursor: 'grab',
        contain: 'layout paint size',
        opacity: 0,
        transition: 'opacity 1s ease',
      }}
    />
  </div>
}

<Cobe/>

<div style={{ textAlign: 'center' }}>
  A **lightweight (5kB)** WebGL globe lib. The name "COBE" stands for [Cosmic Background Explorer](https://en.wikipedia.org/wiki/Cosmic_Background_Explorer).

  Read about how the library was created on [Twitter](https://twitter.com/shuding_/status/1475916082875666441).
<div style={{ marginTop: 100 }}/>

### Quick Start

</div>

<Nextra.Tabs items={["npm", "yarn", "pnpm"]}>
  <Nextra.Tab>
    ```bash
    npm install cobe
    ```
  </Nextra.Tab>
  <Nextra.Tab>
    ```bash
    yarn add cobe
    ```
  </Nextra.Tab>
  <Nextra.Tab>
    ```bash
    pnpm install cobe
    ```
  </Nextra.Tab>
</Nextra.Tabs>


<div style={{ textAlign: 'center' }}>
### Examples
</div>

<Nextra.Tabs items={['React', 'Vue 3', 'Svetle', 'Vanilla JS']}>
  <Nextra.Tab>
    ```jsx
    import createGlobe from 'cobe'
    import { useEffect, useRef } from "react'

    function Globe() {
      const canvasRef = useRef()

      useEffect(() => {
        let rotation = 0

        const globe = createGlobe(canvasRef.current, {
          devicePixelRatio: 2,
          width: 300 * 2,
          height: 300 * 2,
          phi: 0,
          theta: 0,
          dark: 1,
          diffuse: 1.2,
          mapSamples: 16000,
          mapBrightness: 6,
          baseColor: [0.3, 0.3, 0.3],
          markerColor: [0.1, 0.8, 1],
          glowColor: [1, 1, 1],
          scale: 1,
          offset: [0, 0],
          markers: [
            { location: [37.7595, -122.4367], size: 0.03 },
            { location: [40.7128, -74.006], size: 0.1 }
          ],
          onRender: (state) => {
            state.phi = rotation
            rotation += 0.01
          }
        })

        return () => {
          globe.destroy()
        }
      }, [])

      return (
        <canvas
          ref={canvasRef}
          style={{
            width: 600,
            maxWidth: '100%',
            aspectRatio: 1
          }}
        />
      )
    }
    ```

    [Live Example →](https://codesandbox.io/s/eager-sky-r2q0g)
  </Nextra.Tab>
  <Nextra.Tab>
    ```vue
    <script setup>
      import { ref, onMounted, onUnmounted } from 'vue'
      import createGlobe from 'cobe'

      const el = ref()
      const rotation = ref(0)
      
      let globe

      onMounted(() => {
        globe = createGlobe(el.value, {
          devicePixelRatio: 2,
          width: 300 * 2,
          height: 300 * 2,
          phi: 0,
          theta: 0,
          dark: 1,
          diffuse: 1.2,
          mapSamples: 16000,
          mapBrightness: 6,
          baseColor: [0.3, 0.3, 0.3],
          markerColor: [0.1, 0.8, 1],
          glowColor: [1, 1, 1],
          markers: [
            { location: [37.7595, -122.4367], size: 0.03 },
            { location: [40.7128, -74.006], size: 0.1 },
          ],
          onRender: (state) => {
            state.phi = rotation.value
            rotation.value += 0.01
          },
        })
      })

      onUnmounted(() => {
        globe.destroy()
      })
    </script>

    <template>
      <canvas :style="{ width: '300px', height: '300px' }" ref="el"></canvas>
    </template>
    ```

    [Live Example →](https://stackblitz.com/edit/vitejs-vite-l5a8xk?file=src/App.vue)
  </Nextra.Tab>
  <Nextra.Tab>
    ```svelte
    <script>
      import { onMount, onDestroy } from 'svelte'
      import createGlobe from 'cobe'

      let canvas
      let rotation = 0
      let globe

      onMount(() => {
        globe = createGlobe(canvas.value, {
          devicePixelRatio: 2,
          width: 300 * 2,
          height: 300 * 2,
          phi: 0,
          theta: 0,
          dark: 1,
          diffuse: 1.2,
          mapSamples: 16000,
          mapBrightness: 6,
          baseColor: [0.3, 0.3, 0.3],
          markerColor: [0.1, 0.8, 1],
          glowColor: [1, 1, 1],
          markers: [
            { location: [37.7595, -122.4367], size: 0.03 },
            { location: [40.7128, -74.006], size: 0.1 }
          ],
          onRender: state => {
            state.phi = rotation
            rotation += 0.01
          }
        })
      })

      onDestroy(() => {
        globe.destroy()
      })
    </script>
    
    <canvas bind:this={canvas} style="width: 300px; height: 300px" />
    ```

    [Live Example →](https://codesandbox.io/s/great-visvesvaraya-78yf6?file=/App.svelte)
  </Nextra.Tab>
  <Nextra.Tab>
    ```html filename="html"
    <canvas
      id="cobe"
      style="width: 300px; height: 300px"
      width="600"
      height="600"
    ></canvas>
    ```

    ```js filename="js"
    import createGlobe from 'cobe'

    let rotation = 0
    let canvas = document.getElementById('cobe')

    const globe = createGlobe(canvas, {
      devicePixelRatio: 2,
      width: 300 * 2,
      height: 300 * 2,
      phi: 0,
      theta: 0,
      dark: 1,
      diffuse: 1.2,
      mapSamples: 16000,
      mapBrightness: 6,
      baseColor: [0.3, 0.3, 0.3],
      markerColor: [0.1, 0.8, 1],
      glowColor: [1, 1, 1],
      markers: [
        { location: [37.7595, -122.4367], size: 0.03 },
        { location: [40.7128, -74.006], size: 0.1 }
      ],
      onRender: (state) => {
        state.phi = rotation
        rotation += 0.03
      }
    })
    ```

    [Live Example →](https://codesandbox.io/s/peaceful-gwen-m579y)
  </Nextra.Tab>
</Nextra.Tabs>
